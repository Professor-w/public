$(function(){var n,i,e,c={$container:$("#container"),_pageStack:[],_configs:[],_pageAppend:function(){},_defaultPage:null,_pageIndex:1,setDefault:function(n){return this._defaultPage=this._find("name",n),this},setPageAppend:function(n){return this._pageAppend=n,this},init:function(){var i=this;$(window).on("hashchange",function(){var n=history.state||{},e=0===location.hash.indexOf("#")?location.hash:"#",t=i._find("url",e)||i._defaultPage;n._pageIndex<=i._pageIndex||i._findInStack(e)?i._back(t):i._go(t)}),history.state&&history.state._pageIndex&&(this._pageIndex=history.state._pageIndex),this._pageIndex--;var n=0===location.hash.indexOf("#")?location.hash:"#",e=i._find("url",n)||i._defaultPage;return this._go(e),this},push:function(n){return this._configs.push(n),this},go:function(n){var e=this._find("name",n);e&&(location.hash=e.url)},_go:function(n){this._pageIndex++,history.replaceState&&history.replaceState({_pageIndex:this._pageIndex},"",location.href);var e=$(n.template).html(),t=$(e).addClass("slideIn").addClass(n.name);return t.on("animationend webkitAnimationEnd",function(){t.removeClass("slideIn").addClass("js_show")}),this.$container.append(t),this._pageAppend.call(this,t),this._pageStack.push({config:n,dom:t}),n.isBind||this._bind(n),this},back:function(){history.back()},_back:function(n){this._pageIndex--;var e=this._pageStack.pop();if(e){var t=0===location.hash.indexOf("#")?location.hash:"#";if(!this._findInStack(t)){var i=$(n.template).html(),a=$(i).addClass("js_show").addClass(n.name);a.insertBefore(e.dom),n.isBind||this._bind(n),this._pageStack.push({config:n,dom:a})}return e.dom.addClass("slideOut").on("animationend webkitAnimationEnd",function(){e.dom.remove()}),this}},_findInStack:function(n){for(var e=null,t=0,i=this._pageStack.length;t<i;t++){var a=this._pageStack[t];if(a.config.url===n){e=a;break}}return e},_find:function(n,e){for(var t=null,i=0,a=this._configs.length;i<a;i++)if(this._configs[i][n]===e){t=this._configs[i];break}return t},_bind:function(n){var e=n.events||{};for(var t in e)for(var i in e[t])this.$container.on(i,t,e[t][i]);n.isBind=!0}};$(window).on("load",function(){for(var n=["./images/layers/content.png","./images/layers/navigation.png","./images/layers/popout.png","./images/layers/transparent.gif"],e=0,t=n.length;e<t;++e)(new Image).src=n[e]}),n=function(){try{return document.createEvent("TouchEvent"),!0}catch(n){return!1}}(),i=$.fn.on,$.fn.on=function(){if(/click/.test(arguments[0])&&"function"==typeof arguments[1]&&n){var e,t=arguments[1];i.apply(this,["touchstart",function(n){e=n.changedTouches[0].clientY}]),i.apply(this,["touchend",function(n){10<Math.abs(n.changedTouches[0].clientY-e)||(n.preventDefault(),t.apply(this,[n]))}])}else i.apply(this,arguments);return this},/Android/gi.test(navigator.userAgent)&&window.addEventListener("resize",function(){"INPUT"!=document.activeElement.tagName&&"TEXTAREA"!=document.activeElement.tagName||window.setTimeout(function(){document.activeElement.scrollIntoViewIfNeeded()},0)}),e={title:"WeUI, 为微信 Web 服务量身设计",desc:"WeUI, 为微信 Web 服务量身设计",link:"https://weui.io",imgUrl:"https://mmbiz.qpic.cn/mmemoticon/ajNVdqHZLLA16apETUPXh9Q5GLpSic7lGuiaic0jqMt4UY8P4KHSBpEWgM7uMlbxxnVR7596b3NPjUfwg7cFbfCtA/0"},$.getJSON("https://weui.io/api/sign?url="+encodeURIComponent(location.href.split("#")[0]),function(n){wx.config({beta:!0,debug:!1,appId:n.appid,timestamp:n.timestamp,nonceStr:n.nonceStr,signature:n.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone","setBounceBackground"]}),wx.ready(function(){wx.invoke("setBounceBackground",{backgroundColor:"#F8F8F8",footerBounceColor:"#F8F8F8"}),wx.onMenuShareTimeline(e),wx.onMenuShareQQ(e),wx.onMenuShareAppMessage({title:"WeUI",desc:"为微信 Web 服务量身设计",link:location.href,imgUrl:"https://mmbiz.qpic.cn/mmemoticon/ajNVdqHZLLA16apETUPXh9Q5GLpSic7lGuiaic0jqMt4UY8P4KHSBpEWgM7uMlbxxnVR7596b3NPjUfwg7cFbfCtA/0"})})}),function(){for(var n={},e=$('script[type="text/html"]'),t=$(window).height(),i=0,a=e.length;i<a;++i){var o=e[i],s=o.id.replace(/tpl_/,"");n[s]={name:s,url:"#"+s,template:"#"+o.id}}for(var r in n.home.url="#",n)c.push(n[r]);c.setPageAppend(function(n){var e=n.find(".page__ft");e.length<1||(e.position().top+e.height()<t?e.addClass("j_bottom"):e.removeClass("j_bottom"))}).setDefault("home").init()}(),window.pageManager=c,window.home=function(){location.hash=""}});